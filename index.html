<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>Workout Tracker + Rest Timer</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0b0f17">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<link rel="apple-touch-icon" href="apple-touch-icon.png">

<style>
html { -webkit-text-size-adjust: 100%; }
body {
  margin:0;
  background:#0b0f17;
  color:#e8eefc;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
}

.wrap {
  max-width: 900px;
  margin: auto;
  padding: 16px;
  padding-bottom: 160px;
}

h1 { font-size: 20px; margin-bottom: 12px; }

.card {
  background:#121a2a;
  border:1px solid #24314f;
  border-radius:18px;
  padding:14px;
}

label { font-size:13px; opacity:.85; display:block; margin-bottom:6px; }

input, select, textarea, button {
  width:100%;
  background:#0e1422;
  color:#e8eefc;
  border:1px solid #2a3a60;
  border-radius:14px;
  padding:14px;
  font-size:16px;
  min-height:52px;
}

input[type="date"]{
  appearance:none;
  -webkit-appearance:none;
  text-align:center;
}

textarea { resize:none; min-height:90px; }

button {
  font-weight:900;
  cursor:pointer;
}

.row {
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}

.row > div {
  flex:1;
  min-width:140px;
}

.actions {
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
}

.muted { font-size:13px; opacity:.75; margin-top:6px; }

.divider {
  height:1px;
  background:#24314f;
  margin:14px 0;
}

/* Pages */
.page { display:none; }
.page.active { display:block; }

/* Exercises */
.exercise {
  border:1px solid #24314f;
  border-radius:16px;
  padding:12px;
  margin-top:12px;
}

.exercise-header {
  display:flex;
  gap:10px;
}

.iconBtn {
  width:52px;
  min-width:52px;
  padding:0;
}

/* Timer */
.timerBig {
  text-align:center;
  font-size:52px;
  font-weight:900;
  margin:14px 0;
}

.pillrow {
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}

.pillrow button {
  width:auto;
  border-radius:999px;
  padding:12px 16px;
}

/* History */
.entry {
  border:1px solid #24314f;
  border-radius:16px;
  padding:12px;
}

/* Tabs */
.tabbar {
  position:fixed;
  bottom:0; left:0; right:0;
  display:grid;
  grid-template-columns:1fr 1fr 1fr;
  gap:8px;
  padding:10px 12px calc(10px + env(safe-area-inset-bottom));
  background:rgba(11,15,23,.95);
  border-top:1px solid #24314f;
}

.tabbar button.active {
  border-color:#5c7dff;
}

/* Flash */
.flash {
  position:fixed;
  inset:0;
  background:rgba(92,125,255,.2);
  opacity:0;
  pointer-events:none;
}
.flash.on { opacity:1; }
</style>
</head>

<body>
<div class="wrap">
<h1>Workout Tracker + Rest Timer</h1>

<!-- LOG PAGE -->
<section id="page-log" class="page active">
<div class="card">

<div class="row">
  <div>
    <label>Week # (auto from date)</label>
    <input id="week" type="number">
    <div class="muted">Uses ISO week-of-year</div>
  </div>
</div>

<div class="row">
  <div>
    <label>Day of week</label>
    <select id="day">
      <option>Monday</option><option>Tuesday</option><option>Wednesday</option>
      <option>Thursday</option><option>Friday</option><option>Saturday</option><option>Sunday</option>
    </select>
  </div>
  <div>
    <label>Date</label>
    <input id="date" type="date">
  </div>
</div>

<div class="divider"></div>

<div class="actions">
  <button id="addExerciseBtn">+ Add Exercise</button>
  <button id="saveBtn">Save Workout</button>
</div>

<div id="exerciseList"></div>

<div class="divider"></div>

<label>Notes</label>
<textarea id="notes" placeholder="How it felt, PRs, etc."></textarea>

</div>
</section>

<!-- TIMER PAGE -->
<section id="page-timer" class="page">
<div class="card">

<div class="pillrow">
  <button data-sec="60">60s</button>
  <button data-sec="90">90s</button>
  <button data-sec="120">120s</button>
  <button data-sec="180">180s</button>
</div>

<div class="row" style="margin-top:12px">
  <div>
    <label>Custom seconds</label>
    <input id="customSec" type="number">
  </div>
  <div style="display:flex;align-items:end">
    <button id="setCustom">Set</button>
  </div>
</div>

<div class="timerBig" id="timerDisplay">01:30</div>

<div class="actions">
  <button id="startPause">Start</button>
  <button id="resetTimer">Reset</button>
</div>

</div>
</section>

<!-- HISTORY PAGE -->
<section id="page-history" class="page">
<div class="card">

<label>Search</label>
<input id="search">

<div class="divider"></div>

<div id="history"></div>

</div>
</section>

</div>

<!-- Tabs -->
<div class="tabbar">
<button class="active" data-page="log">Log</button>
<button data-page="timer">Timer</button>
<button data-page="history">History</button>
</div>

<div class="flash" id="flash"></div>

<script>
const STORAGE="workouts_v1";
const pages=document.querySelectorAll(".page");
const tabs=document.querySelectorAll(".tabbar button");

tabs.forEach(b=>b.onclick=()=>{
  tabs.forEach(x=>x.classList.remove("active"));
  b.classList.add("active");
  pages.forEach(p=>p.classList.remove("active"));
  document.getElementById("page-"+b.dataset.page).classList.add("active");
});

const dateEl=document.getElementById("date");
const weekEl=document.getElementById("week");
const dayEl=document.getElementById("day");

function isoWeek(d){
  d=new Date(Date.UTC(d.getFullYear(),d.getMonth(),d.getDate()));
  d.setUTCDate(d.getUTCDate()+4-(d.getUTCDay()||7));
  const y=new Date(Date.UTC(d.getUTCFullYear(),0,1));
  return Math.ceil((((d-y)/86400000)+1)/7);
}

dateEl.valueAsDate=new Date();
weekEl.value=isoWeek(new Date());
dayEl.value=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][new Date().getDay()];

if("serviceWorker"in navigator){
  navigator.serviceWorker.register("service-worker.js");
}
</script>
</body>
</html>
